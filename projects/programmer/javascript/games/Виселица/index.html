<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Виселица!</title>
</head>
<body>
<h1>Виселица!</h1>

<script>

    alert('Приветствуем в игре - Виселица!');
    alert('Данное слово относиться к теме - Члены семьи');

    // Создаём массив со словами
    let words = [
        "сестра",
        "брат",
        "мама",
        "папа",
        "бабушка",
        "дедушка"
    ];

    // Выбираем случайное слово
    let word = words[Math.floor(Math.random() * words.length)];

    // Создаём итоговый массив
    let answerArray = [];
    for (let i = 0; i < word.length; i++) {
        answerArray[i] = "_";
    }

    let remainingLetters = word.length;

    // Создаём переменную для подсчёта количества попыток
    let count = word.length + 3;

    let lettersWord;// Переменная равная количеству букв в слове

    // Проверяет, сколько букв осталось отгодать в слове и подставляет соответствующее окончание
    if (remainingLetters >= 3 && remainingLetters <= 20) {
        lettersWord = "букв"
    } else if (remainingLetters === 21 || remainingLetters === 31 || remainingLetters === 41) {
        lettersWord = "буквы";
    }

    alert('Данное слово состоит из ' + answerArray.length + ' ' + lettersWord);

    // Игровой цикл
    while (remainingLetters > 0 && count > 0) {

        // Показываем состояние игры
        alert(answerArray.join(" "));

        let letters = remainingLetters;// Переменная равная количеству букв в слове

        // Проверяет, сколько букв осталось отгодать в слове и подставляет соответствующее окончание
        if (remainingLetters >= 1 && remainingLetters < 2) {
            letters = "букву";
        } else if (remainingLetters >= 2 && remainingLetters <= 4) {
            letters = "буквы";
        } else if (remainingLetters >= 5 && remainingLetters <= 20) {
            letters = "букв";
        }

        // Запрашиваем вариант ответа и выводим сообщение о количестве оставшихся попыток
        let guess = prompt("Угадай букву, или нажмите Отмена для выхода из игры.\r\nУ вас осталось " + count + " попыток!\r\nВам осталось угадать " + remainingLetters + " " + letters + ".").toLowerCase();

        count--; // Отнимаем значение после каждого ввода

        if (guess === null) {
            // Выходим из игрового цикла
            break;
        } else if (guess.length !== 1) {
            alert("Пожалуйста, введите одиночную букву.");
        } else {
            // Обновляем состояние игры
            for (let j = 0; j < word.length; j++) {
                if (word[j] === guess && answerArray[j] !== guess) {
                    answerArray[j] = guess;
                    remainingLetters--;
                    console.log(remainingLetters);
                }
            }
        }
        // Конец игрового цикла
    }

    // Отображаем ответ и поздравляем игрока
    alert(answerArray.join(" "));

    let lose; // Переменная для вывода сообщения об окончании игры

    if (count === 0 && remainingLetters !== 0) {
        alert("У вас закончились все попытки!\r\nЗагаданное слово было - " + word.toUpperCase());
        lose = document.querySelector('h1').textContent = 'Вы проиграли...';
    } else {
        alert("Отлично! Было загадано слово - " + word.toUpperCase());
        lose = document.querySelector('h1').textContent = 'Вы выиграли!';
    }

</script>

</body>
</html>
